<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>SASS</title>
    <meta name="description" content="The HTML5 Herald">
    <meta name="author" content="BreadGang">
  </head>

  <body>
    <audio loop id="audio" src="./sicko_mode.mp3">
      <p>If you are reading this, it is because your browser does not support the audio element.     </p>
    </audio>

    <script>
      function play() {
        console.log("test")
        document.getElementById("audio").src = document.getElementById("audio").src
        document.getElementById("audio").onloadedmetadata = () => {
          document.getElementById("audio").pause();
          document.getElementById("audio").currentTime = Math.round(((Date.now() / 1000) % document.getElementById("audio").duration) * 100) / 100
          document.getElementById("audio").play();
        }
      }
      // sleep time expects milliseconds
      function sleep (time) {
        return new Promise((resolve) => setTimeout(resolve, time));
      }

      // Usage!
      sleep(1000).then(() => {
        play()
      });
      play()
    </script>
  </body>
</html>
